var addBylineModifiers=function(){var i="?m_bm=true",e=document.querySelectorAll('a[href$="'+i+'"]');Array.prototype.forEach.call(e,function(e,t){e.setAttribute("href",decodeURIComponent(e.getAttribute("href")).replace(i,"")),e.insertAdjacentHTML("beforebegin",molongui_authorship.byline_prefix+" "),e.insertAdjacentHTML("afterend"," "+molongui_authorship.byline_suffix)})},decodeMultiAuthorBylines=function(){var e=document.querySelectorAll('a[href*="molongui_byline=true"]');Array.prototype.forEach.call(e,function(e,t){var i=e.getAttribute("href"),r=new URL(decodeURIComponent(i)),n=new URLSearchParams(r.search),o=r.origin,a=r.pathname,l="";if(!n.has("molongui_byline"))return!1;if(n.has("lang")&&(l="?lang="+n.get("lang")),""===e.innerText)return n.has("m_main_disabled")?e.removeAttribute("href"):e.setAttribute("href",o+a+l),!1;var u,s,d=[molongui_authorship.byline_separator,molongui_authorship.byline_last_separator],c=e.innerText.split(new RegExp(d.join("|"),"gi"));n.has("m_main_disabled")?(s=n.getAll("mca")).unshift("molongui-disabled-link"):(u=a.replace(/^\/|\/$/g,"").split("/").pop(),a.replace(/\/$/g,"").replace(u,""),(s=n.getAll("mca")).unshift(o+a+l));var h="",m=c.length,p=e.getAttribute("class"),f=e.getAttribute("target"),b=e.getAttribute("rel"),g=e.getAttribute("itemprop"),y=p?'class="'+p+'"':"",_=f?'target="'+f+'"':"",A=b?'rel="'+b+'"':"",v=g?'itemprop="'+g+'"':"";for(j=0;j<m;j++){var L=c[j].trim(),M="";M=""!==molongui_authorship.byline_dom_tree?molongui_authorship.byline_dom_tree.replace("{%ma_authorName}",L):L,"molongui-disabled-link"===s[j]||j>=s.length?h+=M:h+='<a href="'+s[j]+'" '+y+" "+A+" "+v+" "+_+' title="'+molongui_authorship.byline_link_title+" "+L+'">'+M+"</a>",j<m-1-1?h+=d[0]:j<m-1&&(h+=d[1])}e.insertAdjacentHTML("afterend",h),e.parentNode.removeChild(e)})},disableEmptyLinks=function(){var e=document.querySelectorAll('a[href="#molongui-disabled-link"]');Array.prototype.forEach.call(e,function(e,t){e.classList.add("molongui-disabled-link"),e.removeAttribute("href")})},initBylines=function(){addBylineModifiers(),decodeMultiAuthorBylines(),disableEmptyLinks()};document.addEventListener("DOMContentLoaded",function(){initBylines();var e=document.body;new MutationObserver(function(e){Array.prototype.forEach.call(e,function(e,t){initBylines()})}).observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!0})});